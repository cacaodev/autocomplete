!function(e,t){e.getElementById("livereloadscript")||((t=e.createElement("script")).async=1,t.src="//"+(window.location.host||"localhost").split(":")[0]+":35729/livereload.js?snipver=1",t.id="livereloadscript",e.getElementsByTagName("head")[0].appendChild(t))}(window.document);var Autosuggest=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function s(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,i=new Array(t);s<t;s++)i[s]=e[s];return i}return function i(a,n){var c,r=this,o=n.delay,l=n.clearButton,d=n.howManyCharacters,u=n.onResults,h=n.selectFirst,m=n.onSearch,f=n.onSubmit,p=void 0===f?function(){}:f;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t(this,"initialize",(function(){r.outputSearch(),r.setDefault(),r.clearButton&&r.createClear();var e=null;r.searchId.addEventListener("input",(function(t){var s=t.target;r.valueFromSearch=s.value,r.classSearch=s.parentNode,r.escapedChar=r.valueFromSearch.replace(/[`~!@#$%^&*()_|+\-=÷¿?;:'",.<>\{\}\[\]\\\/]/g,""),clearTimeout(e),e=setTimeout((function(){r.searchItem(r.escapedChar.trim())}),r.delay)}))})),t(this,"outputSearch",(function(){r.outputSearch=document.createElement("ul"),r.setAttribute(r.outputSearch,{id:r.searchOutputUl,addClass:"auto-output-search",tabIndex:0,role:"listbox"}),r.searchId.parentNode.insertBefore(r.outputSearch,r.searchId.nextSibling),r.matchList=document.getElementById(r.searchOutputUl)})),t(this,"setDefault",(function(){r.setAttribute(r.searchId,{"aria-owns":"".concat(r.search,"-list"),"aria-expanded":!1,"aria-autocomplete":"both","aria-activedescendant":"",role:"combobox",removeClass:"expanded"}),r.matchList.classList.contains(r.isActive)&&r.outputSearch.classList.remove(r.isActive),r.outputSearch.scrollTop=0})),t(this,"searchItem",(function(t){if(r.searchId.parentNode.classList.add(r.isLoading),r.showHiddenButton(),r.howManyCharacters>t.length)return r.classSearch.classList.remove(r.isLoading),r.showHiddenButton(),void r.setDefault();r.onSearch(t).then((function(i){var a,n=Array.isArray(i)?s(i):JSON.parse(JSON.stringify(i));r.classSearch.classList.remove(r.isLoading),0===i.length&&(r.searchId.classList.remove("expanded"),r.showHiddenButton(),r.setDefault()),(i.length>0||(a=i)&&"object"===e(a)&&a.constructor===Object)&&r.outputHtml(n,t),r.searchId.classList.remove(r.error)})).catch((function(){r.searchId.parentNode.classList.remove(r.isLoading),r.searchId.classList.add(r.error),r.showHiddenButton(),r.setDefault()}))})),t(this,"outputHtml",(function(e,t){if(r.selected=0,r.matches=e,r.setAttribute(r.searchId,{"aria-expanded":!0,addClass:"expanded"}),r.matchList.innerHTML=r.onResults(r.matches,t),r.matchList.classList.add(r.isActive),r.matchList.addEventListener("click",r.textToInput),r.searchId.addEventListener("keydown",r.handleEvent),r.searchId.addEventListener("click",r.showLiItems),r.itemsLi=document.querySelectorAll("#".concat(r.searchOutputUl," > li")),document.addEventListener("click",(function(e){e.target.id!==r.search&&r.setDefault()})),r.itemsLi.length>1)for(var s=0;s<r.itemsLi.length;s++)r.itemsLi[s].tabIndex=-1,r.itemsLi[s].addEventListener("mouseleave",r.textToInput),r.itemsLi[s].addEventListener("mousemove",r.textToInput);else r.itemsLi[0].tabIndex=-1;r.selectFirst&&r.selectFirstEl()})),t(this,"selectFirstEl",(function(){r.selected=1,r.activeElement=document.querySelector(".".concat(r.activeList)),r.activeElement&&r.actionsOnLi(r.activeElement,"");var e=r.outputSearch.firstElementChild;r.setAttribute(e,{id:"".concat(r.selectedOption,"-0"),addClass:r.activeList,"aria-selected":!0}),r.ariaDescendant(r.searchId,"".concat(r.selectedOption,"-0")),r.followElement(e,r.outputSearch)})),t(this,"showHiddenButton",(function(){r.clearButton&&(r.clearButton.classList.remove("hidden"),r.clearButton.addEventListener("click",r.handleClearButton))})),t(this,"setAttribute",(function(e,t){for(var s in t)"addClass"===s?e.classList.add(t[s]):"removeClass"===s?e.classList.remove(t[s]):e.setAttribute(s,t[s])})),t(this,"showLiItems",(function(){r.matchList.textContent.length>0&&(r.setAttribute(r.searchId,{"aria-expanded":!0,addClass:"expanded"}),r.outputSearch.classList.add(r.isActive),r.selectFirstEl())})),t(this,"textToInput",(function(e){var t={x:0,y:0};if("click"===e.type&&r.getTextFromLi(e.target.closest("li")),"mousemove"===e.type){var s={x:e.screenX,y:e.screenY};if(s.x===t.x&&s.y===t.y)return;t={x:e.screenX,y:e.screenY},r.removeAriaSelected(document.querySelector(".".concat(r.activeList))),r.actionsOnLi(e.target.closest("li"),"mousemove"===e.type)}"mouseleave"===e.type&&(t={x:e.screenX,y:e.screenY})})),t(this,"actionsOnLi",(function(e,t){e.id=t?"".concat(r.selectedOption,"-").concat(r.indexLiSelected(e)):"",e.setAttribute("aria-selected",!!t),e.classList[t?"add":"remove"](r.activeList),r.ariaDescendant(r.searchId,t?"".concat(r.selectedOption,"-").concat(r.indexLiSelected(e)):null),r.selected=t?r.indexLiSelected(e)+1:1})),t(this,"getTextFromLi",(function(e){e&&(r.getText=e.firstElementChild?e.firstElementChild:e,r.searchId.value=r.getText.textContent.trim(),r.removeAriaSelected(e),r.onSubmit(r.matches[r.selected-1],r.searchId.value),r.setDefault())})),t(this,"indexLiSelected",(function(e){return Array.prototype.indexOf.call(r.itemsLi,e)})),t(this,"handleEvent",(function(e){var t=e.keyCode;switch(r.selectedLi=document.querySelector(".".concat(r.activeList)),t){case r.keyCodes.UP:case r.keyCodes.DOWN:if(r.itemsLi.length<=1&&r.selectFirst)return;t===r.keyCodes.UP?(r.selected-=1,r.selected<=0&&(r.selected=r.itemsLi.length)):(r.selected+=1,r.selected>r.itemsLi.length&&(r.selected=1)),r.removeAriaSelected(r.selectedLi),r.setAriaSelectedItem(r.itemsLi[r.selected-1]);break;case r.keyCodes.ENTER:r.removeAriaSelected(r.selectedLi),r.getTextFromLi(r.selectedLi);break;case r.keyCodes.TAB:case r.keyCodes.ESC:r.setDefault()}})),t(this,"setAriaSelectedItem",(function(e){r.setAttribute(e,{id:"".concat(r.selectedOption,"-").concat(r.indexLiSelected(e)),"aria-selected":!0,addClass:r.activeList}),r.ariaDescendant(r.searchId,"".concat(r.selectedOption,"-").concat(r.indexLiSelected(e))),r.followElement(e,r.outputSearch)})),t(this,"followElement",(function(e,t){if(e.offsetTop<t.scrollTop)t.scrollTop=e.offsetTop;else{var s=e.offsetTop+e.offsetHeight;s>t.scrollTop+t.offsetHeight&&(t.scrollTop=s-t.offsetHeight)}})),t(this,"removeAriaSelected",(function(e){e&&r.setAttribute(e,{id:"",removeClass:r.activeList,"aria-selected":!1})})),t(this,"ariaDescendant",(function(e,t){e.setAttribute("aria-activedescendant",t||"")})),t(this,"createClear",(function(){r.clearButton=document.createElement("button"),r.setAttribute(r.clearButton,{id:"auto-clear-".concat(r.search),class:"auto-clear hidden",type:"button","aria-label":"claar text from input"}),r.searchId.insertAdjacentElement("afterend",r.clearButton)})),t(this,"handleClearButton",(function(e){e.target.classList.add("hidden"),r.searchId.value="",r.searchId.focus(),r.outputSearch.textContent="",r.setDefault(),r.searchId.classList.remove(r.error)})),this.search=a,this.searchId=document.getElementById(this.search),this.onResults=u,this.onSubmit=p,this.onSearch=(c=m,Boolean(c&&"function"==typeof c.then)?m:function(e){return Promise.resolve(m(e))}),this.delay=o||500,this.howManyCharacters=d||2,this.clearButton=l||!1,this.selectFirst=h||!1,this.searchOutputUl="".concat(this.search,"-list"),this.isLoading="auto-is-loading",this.isActive="auto-is-active",this.activeList="selected",this.selectedOption="selectedOption",this.error="auto-error",this.keyCodes={ESC:27,ENTER:13,UP:38,DOWN:40,TAB:9},this.initialize()}}();
//# sourceMappingURL=autosuggest.min.js.map
