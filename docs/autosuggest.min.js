var Autosuggest=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function s(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,a=new Array(t);s<t;s++)a[s]=e[s];return a}return function a(i,r){var n,c=this,o=r.delay,l=r.clearButton,d=r.howManyCharacters,u=r.onResults,h=r.selectFirst,f=r.onSearch,m=r.onSubmit,p=void 0===m?function(){}:m;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t(this,"initialize",(function(){c.outputSearch(),c.setDefault(),c.clearButton&&c.createClearButton();var e=null;c.searchId.addEventListener("input",(function(t){var s=t.target;c.valueFromSearch=s.value,c.classSearch=s.parentNode,c.escapedChar=c.valueFromSearch.replace(/[`~!@#$%^&*()_|+\-=÷¿?;:'",.<>\{\}\[\]\\\/]/g,""),clearTimeout(e),e=setTimeout((function(){c.searchItem(c.escapedChar.trim())}),c.delay)}))})),t(this,"outputSearch",(function(){c.outputSearch=document.createElement("ul"),c.setAttribute(c.outputSearch,{id:c.searchOutputUl,addClass:"auto-output-search",tabIndex:0,role:"listbox"}),c.searchId.parentNode.insertBefore(c.outputSearch,c.searchId.nextSibling),c.matchList=document.getElementById(c.searchOutputUl)})),t(this,"setDefault",(function(){c.setAttribute(c.searchId,{"aria-owns":"".concat(c.search,"-list"),"aria-expanded":!1,"aria-autocomplete":"both","aria-activedescendant":"",role:"combobox",removeClass:"expanded"}),c.matchList.classList.contains(c.isActive)&&c.outputSearch.classList.remove(c.isActive),c.outputSearch.scrollTop=0})),t(this,"searchItem",(function(t){if(c.searchId.parentNode.classList.add(c.isLoading),c.showHiddenButton(),c.howManyCharacters>t.length)return c.classSearch.classList.remove(c.isLoading),c.showHiddenButton(),void c.setDefault();c.onSearch(t).then((function(a){var i,r=Array.isArray(a)?s(a):JSON.parse(JSON.stringify(a));c.classSearch.classList.remove(c.isLoading),0===a.length&&(c.searchId.classList.remove("expanded"),c.showHiddenButton(),c.setDefault()),(a.length>0||(i=a)&&"object"===e(i)&&i.constructor===Object)&&c.outputHtml(r,t),c.searchId.classList.remove(c.error)})).catch((function(){c.searchId.parentNode.classList.remove(c.isLoading),c.searchId.classList.add(c.error),c.showHiddenButton(),c.setDefault()}))})),t(this,"outputHtml",(function(e,t){c.selectedIndex=0,c.matches=e,c.setAttribute(c.searchId,{"aria-expanded":!0,addClass:"expanded"}),c.matchList.innerHTML=c.onResults(c.matches,t),c.matchList.classList.add(c.isActive),c.matchList.addEventListener("click",c.textToInput),c.searchId.addEventListener("keydown",c.handleEvent),c.searchId.addEventListener("click",c.showLiItems),c.itemsLi=document.querySelectorAll("#".concat(c.searchOutputUl," > li")),document.addEventListener("click",(function(e){e.target.id!==c.search&&c.setDefault()})),c.mouseEvent(),c.selectFirst&&c.selectFirstEl()})),t(this,"mouseEvent",(function(){for(var e=0;e<c.itemsLi.length;e++)c.setAttribute(c.itemsLi[e],{role:"option",tabindex:-1,"aria-selected":"false"}),c.itemsLi[e].addEventListener("mousemove",c.textToInput)})),t(this,"selectFirstEl",(function(){c.selectedIndex=1,c.removeAriaSelected(document.querySelector(".".concat(c.activeList)));var e=c.outputSearch.firstElementChild;c.setAttribute(e,{id:"".concat(c.selectedOption,"-0"),addClass:c.activeList,"aria-selected":!0}),c.ariaDescendant(c.searchId,"".concat(c.selectedOption,"-0")),c.followElement(e,c.outputSearch)})),t(this,"showHiddenButton",(function(){c.clearButton&&(c.clearButton.classList.remove("hidden"),c.clearButton.addEventListener("click",c.handleClearButton))})),t(this,"setAttribute",(function(e,t){for(var s in t)"addClass"===s?e.classList.add(t[s]):"removeClass"===s?e.classList.remove(t[s]):e.setAttribute(s,t[s])})),t(this,"showLiItems",(function(){c.matchList.textContent.length>0&&(c.setAttribute(c.searchId,{"aria-expanded":!0,addClass:"expanded"}),c.outputSearch.classList.add(c.isActive),c.selectFirstEl())})),t(this,"textToInput",(function(e){var t=e.screenX,s=e.screenY,a=e.target,i=e.type,r=a.closest("li"),n={x:0,y:0};if("click"===i)c.getTextFromLi(r);else if("mousemove"===i){var o={x:t,y:s};if(o.x===n.x&&o.y===n.y)return;n={x:t,y:s},c.removeAriaSelected(document.querySelector(".".concat(c.activeList))),c.setAriaSelectedItem(r),c.selectedIndex=c.indexLiSelected(r)+1}})),t(this,"getTextFromLi",(function(e){e&&(c.getText=e.firstElementChild?e.firstElementChild:e,c.searchId.value=c.getText.textContent.trim(),c.removeAriaSelected(e),c.onSubmit(c.matches[c.selectedIndex-1],c.searchId.value),c.setDefault())})),t(this,"indexLiSelected",(function(e){return Array.prototype.indexOf.call(c.itemsLi,e)})),t(this,"handleEvent",(function(e){var t=e.keyCode;switch(c.selectedLi=document.querySelector(".".concat(c.activeList)),t){case c.keyCodes.UP:case c.keyCodes.DOWN:if(c.matches.length<=1&&c.selectFirst)return;t===c.keyCodes.UP?(c.selectedIndex-=1,c.selectedIndex<=0&&(c.selectedIndex=c.matches.length)):(c.selectedIndex+=1,c.selectedIndex>c.matches.length&&(c.selectedIndex=1)),c.removeAriaSelected(c.selectedLi),c.setAriaSelectedItem(c.itemsLi[c.selectedIndex-1]);break;case c.keyCodes.ENTER:c.removeAriaSelected(c.selectedLi),c.getTextFromLi(c.selectedLi);break;case c.keyCodes.TAB:case c.keyCodes.ESC:c.removeAriaSelected(c.selectedLi),c.setDefault()}})),t(this,"setAriaSelectedItem",(function(e){c.setAttribute(e,{id:"".concat(c.selectedOption,"-").concat(c.indexLiSelected(e)),"aria-selected":!0,addClass:c.activeList}),c.ariaDescendant(c.searchId,"".concat(c.selectedOption,"-").concat(c.indexLiSelected(e))),c.followElement(e,c.outputSearch)})),t(this,"followElement",(function(e,t){if(e.offsetTop<t.scrollTop)t.scrollTop=e.offsetTop;else{var s=e.offsetTop+e.offsetHeight;s>t.scrollTop+t.offsetHeight&&(t.scrollTop=s-t.offsetHeight)}})),t(this,"removeAriaSelected",(function(e){e&&c.setAttribute(e,{id:"",removeClass:c.activeList,"aria-selected":!1})})),t(this,"ariaDescendant",(function(e,t){e.setAttribute("aria-activedescendant",t||"")})),t(this,"createClearButton",(function(){c.clearButton=document.createElement("button"),c.setAttribute(c.clearButton,{id:"auto-clear-".concat(c.search),class:"auto-clear hidden",type:"button","aria-label":"claar text from input"}),c.searchId.insertAdjacentElement("afterend",c.clearButton)})),t(this,"handleClearButton",(function(e){e.target.classList.add("hidden"),c.searchId.value="",c.searchId.focus(),c.outputSearch.textContent="",c.setDefault(),c.searchId.classList.remove(c.error)})),this.search=i,this.searchId=document.getElementById(this.search),this.onResults=u,this.onSubmit=p,this.onSearch=(n=f,Boolean(n&&"function"==typeof n.then)?f:function(e){return Promise.resolve(f(e))}),this.delay=o||500,this.howManyCharacters=d||2,this.clearButton=l||!1,this.selectFirst=h||!1,this.searchOutputUl="".concat(this.search,"-list"),this.isLoading="auto-is-loading",this.isActive="auto-is-active",this.activeList="auto-selected",this.selectedOption="selectedOption",this.error="auto-error",this.keyCodes={ESC:27,ENTER:13,UP:38,DOWN:40,TAB:9},this.initialize()}}();
