var Autocomplete=function(){"use strict";var t=function(t,e){for(var i in e)"addClass"===i?t.classList.add(e[i]):"removeClass"===i?t.classList.remove(e[i]):t.setAttribute(i,e[i])},e=function(t,e){return e.value=function(t){return t.firstElementChild||t}(t).textContent.trim()},i=function(t,e){t.scrollTop=t.offsetTop-e.offsetHeight},n=function(t,e){t.setAttribute("aria-activedescendant",e||"")},s=function(t,e,i,n){var s=n.previousSibling,o=s?s.offsetHeight:0;if("0"==t.getAttribute("aria-posinset")&&(n.scrollTop=t.offsetTop-function(t,e){var i=document.querySelectorAll("#"+t+" > li:not(."+e+")"),n=0;return[].slice.call(i).map((function(t){return n+=t.offsetHeight})),n}(e,i)),t.offsetTop-o<n.scrollTop)n.scrollTop=t.offsetTop-o;else{var a=t.offsetTop+t.offsetHeight-o;a>n.scrollTop+n.offsetHeight&&(n.scrollTop=a-n.offsetHeight)}},o=function(t){return document.createElement(t)},a=27,c=13,u=38,r=40,d=9;return function(l,h){var f,v=this,m=h.delay,p=void 0===m?500:m,b=h.clearButton,x=void 0===b||b,k=h.howManyCharacters,y=void 0===k?1:k,C=h.selectFirst,j=void 0!==C&&C,w=h.insertToInput,V=void 0!==w&&w,A=h.showAllValues,O=void 0!==A&&A,g=h.cache,I=void 0!==g&&g,J=h.disableCloseOnSelect,N=void 0!==J&&J,S=h.classGroup,T=h.classPreventClosing,$=h.classPrefix,q=h.ariaLabelClear,z=h.onSearch,B=h.onResults,G=void 0===B?function(){}:B,P=h.onSubmit,D=void 0===P?function(){}:P,E=h.onOpened,F=void 0===E?function(){}:E,H=h.onReset,K=void 0===H?function(){}:H,L=h.onRender,M=void 0===L?function(){}:L,Q=h.onClose,R=void 0===Q?function(){}:Q,U=h.noResults,W=void 0===U?function(){}:U,X=h.onSelectedItem,Y=void 0===X?function(){}:X;this.t=function(){var e,i,n,s,o;v.i(),e=v.s,i=v.o,n=v.u,s=v.l,o=v.h,t(i,{id:n,tabIndex:"0",role:"listbox"}),t(s,{addClass:o+"-results-wrapper"}),s.insertAdjacentElement("beforeend",i),e.parentNode.insertBefore(s,e.nextSibling),v.s.addEventListener("input",v.v),v.m&&v.s.addEventListener("click",v.v),v.p({element:v.s,results:v.o})},this.k=function(t,e){v.C&&("update"===t?v.s.setAttribute(v.j,e.value):"remove"===t?v.s.removeAttribute(v.j):v.s.value=v.s.getAttribute(v.j))},this.v=function(t){var e=t.target,i=t.type;if("true"!==v.s.getAttribute("aria-expanded")||"click"!==i){var n=e.value.replace(v.V,"\\$&");v.k("update",e);var s=v.m?0:v.A;clearTimeout(v.O),v.O=setTimeout((function(){v.g(n.trim())}),s)}},this.I=function(){var e;t(v.s,{"aria-owns":v.J+"-list","aria-expanded":"false","aria-autocomplete":"list","aria-activedescendant":"",role:"combobox",removeClass:"auto-expanded"}),v.l.classList.remove(v.N),(0==(null==(e=v.S)?void 0:e.length)&&!v.T||v.m)&&(v.o.innerHTML=""),v.$=v.q?0:-1,v.B()},this.g=function(t){v.G=t,v.P(!0),function(t,e){void 0===t&&(t=!1),t&&(t.classList.remove("hidden"),t.addEventListener("click",e))}(v.D,v.destroy),0==t.length&&v.F&&v.D.classList.add("hidden"),v.H>t.length&&!v.m?v.P():v.K({currentValue:t,element:v.s}).then((function(e){var i=v.s.value.length,n=e.length;v.S=Array.isArray(e)?[].concat(e):JSON.parse(JSON.stringify(e)),v.P(),v.L(),0==n&&0==i&&v.D.classList.add("hidden"),0==n&&i?(v.s.classList.remove("auto-expanded"),v.I(),v.M({element:v.s,currentValue:t,template:v.R}),v.U()):(n>0||function(t){return t&&"object"==typeof t&&t.constructor===Object}(e))&&(v.$=v.q?0:-1,v.R(),v.U())})).catch((function(){v.P(),v.I()}))},this.P=function(t){return v.s.parentNode.classList[t?"add":"remove"](v.W)},this.L=function(){return v.s.classList.remove(v.X)},this.U=function(){v.s.addEventListener("keydown",v.Y),v.s.addEventListener("click",v.Z),["mousemove","click"].map((function(t){v.o.addEventListener(t,v._)})),document.addEventListener("click",v.tt)},this.R=function(e){t(v.s,{"aria-expanded":"true",addClass:v.h+"-expanded"}),v.o.innerHTML=0===v.S.length?v.et({currentValue:v.G,matches:0,template:e}):v.et({currentValue:v.G,matches:v.S,classGroup:v.it}),v.l.classList.add(v.N);var n=v.it?":not(."+v.it+")":"";v.nt=document.querySelectorAll("#"+v.u+" > li"+n),function(e){for(var i=0;i<e.length;i++)t(e[i],{role:"option",tabindex:"-1","aria-selected":"false","aria-setsize":e.length,"aria-posinset":i})}(v.nt),v.st({type:"results",element:v.s,results:v.o}),v.ot(),i(v.o,v.l)},this.tt=function(t){var e=t.target,i=null;(e.closest("ul")&&v.at||e.closest("."+v.ct))&&(i=!0),e.id===v.J||i||v.I()},this.ot=function(){if(v.ut(document.querySelector("."+v.rt)),v.q){var e=v.o.firstElementChild,i=v.it&&v.S.length>0&&v.q?e.nextElementSibling:e;v.dt({index:v.$,element:v.s,object:v.S[v.$]}),t(i,{id:v.lt+"-0",addClass:v.rt,"aria-selected":"true"}),n(v.s,v.lt+"-0")}},this.Z=function(){v.o.textContent.length>0&&!v.l.classList.contains(v.N)&&(t(v.s,{"aria-expanded":"true",addClass:v.h+"-expanded"}),v.l.classList.add(v.N),i(v.o,v.l),v.ot(),v.st({type:"showItems",element:v.s,results:v.o}))},this._=function(t){t.preventDefault();var e=t.target,i=t.type,n=e.closest("li"),s=null==n?void 0:n.hasAttribute("role"),o=v.rt,a=document.querySelector("."+o);n&&s&&("click"===i&&v.ht(n),"mousemove"!==i||n.classList.contains(o)||(v.ut(a),v.ft(n),v.$=v.vt(n),v.dt({index:v.$,element:v.s,object:v.S[v.$]})))},this.ht=function(t){t&&0!==v.S.length?(e(t,v.s),v.pt({index:v.$,element:v.s,object:v.S[v.$],results:v.o}),v.at||(v.ut(t),v.I()),v.F&&v.D.classList.remove("hidden"),v.k("remove")):!v.at&&v.I()},this.vt=function(t){return Array.prototype.indexOf.call(v.nt,t)},this.Y=function(t){var i=t.keyCode,s=v.l.classList.contains(v.N),o=v.S.length+1;switch(v.bt=document.querySelector("."+v.rt),i){case u:case r:if(t.preventDefault(),o<=1&&v.q||!s)return;i===u?(v.$<0&&(v.$=o-1),v.$-=1):(v.$+=1,v.$>=o&&(v.$=0)),v.ut(v.bt),o>0&&v.$>=0&&v.$<o-1?(v.dt({index:v.$,element:v.s,object:v.S[v.$]}),v.ft(v.nt[v.$]),v.T&&s&&e(v.nt[v.$],v.s)):(v.k(),n(v.s));break;case c:v.ht(v.bt);break;case d:case a:t.stopPropagation(),v.I()}},this.ft=function(e){var i=v.lt+"-"+v.vt(e);t(e,{id:i,"aria-selected":"true",addClass:v.rt}),n(v.s,i),s(e,v.u,v.it,v.o)},this.ut=function(e){e&&t(e,{id:"",removeClass:v.rt,"aria-selected":"false"})},this.i=function(){v.F&&(t(v.D,{class:v.h+"-clear hidden",type:"button",title:v.xt,"aria-label":v.xt}),v.s.insertAdjacentElement("afterend",v.D))},this.destroy=function(){v.F&&v.D.classList.add("hidden"),v.s.value="",v.s.focus(),v.o.textContent="",v.I(),v.L(),v.kt(v.s),v.s.removeEventListener("keydown",v.Y),v.s.removeEventListener("click",v.Z),document.removeEventListener("click",v.tt)},this.J=l,this.s=document.getElementById(l),this.K=(f=z,Boolean(f&&"function"==typeof f.then)?z:function(t){var e=t.currentValue,i=t.element;return Promise.resolve(z({currentValue:e,element:i}))}),this.et=G,this.p=M,this.pt=D,this.dt=Y,this.st=F,this.kt=K,this.M=W,this.B=R,this.A=p,this.H=y,this.F=x,this.q=j,this.T=V,this.m=O,this.it=S,this.ct=T,this.xt=q||"clear the search query",this.h=$?$+"-auto":"auto",this.at=N,this.C=I,this.u=this.h+"-"+this.J+"-results",this.j="data-cache-auto-"+this.J,this.W=this.h+"-is-loading",this.N=this.h+"-is-active",this.rt=this.h+"-selected",this.lt=this.h+"-selected-option",this.X=this.h+"-error",this.V=/[|\\{}()[\]^$+*?.]/g,this.O=null,this.l=o("div"),this.o=o("ul"),this.D=o("button"),this.t()}}();
