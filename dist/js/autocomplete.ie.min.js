var Autocomplete=function(){"use strict";var t=function(t,e){for(var i in e)"addClass"===i?n(t,"add",e[i]):"removeClass"===i?n(t,"remove",e[i]):t.setAttribute(i,e[i])},e=function(t){return(t.firstElementChild||t).textContent.trim()},i=function(t,e){t.scrollTop=t.offsetTop-e.offsetHeight},n=function(t,e,i){return t.classList[e](i)},o=function(e,i){t(e,{"aria-activedescendant":i||""})},s=function(t,e,i,n){var o=n.previousSibling,s=o?o.offsetHeight:0;if("0"==t.getAttribute("aria-posinset")&&(n.scrollTop=t.offsetTop-function(t,e){var i=document.querySelectorAll("#"+t+" > li:not(."+e+")"),n=0;return[].slice.call(i).map((function(t){return n+=t.offsetHeight})),n}(e,i)),t.offsetTop-s<n.scrollTop)n.scrollTop=t.offsetTop-s;else{var a=t.offsetTop+t.offsetHeight-s;a>n.scrollTop+n.offsetHeight&&(n.scrollTop=a-n.offsetHeight)}},a=function(t){return document.createElement(t)},r=function(t){return document.querySelector(t)},c=function(t,e,i){t.addEventListener(e,i)},u=function(t,e,i){t.removeEventListener(e,i)},d=27,l=13,h=38,f=40,v=9;return function(m,p){var b,x=this,k=p.delay,y=void 0===k?500:k,C=p.clearButton,j=void 0===C||C,w=p.howManyCharacters,V=void 0===w?1:w,g=p.selectFirst,A=void 0!==g&&g,O=p.insertToInput,I=void 0!==O&&O,J=p.showAllValues,N=void 0!==J&&J,S=p.cache,T=void 0!==S&&S,$=p.disableCloseOnSelect,q=void 0!==$&&$,z=p.classGroup,B=p.classPreventClosing,G=p.classPrefix,P=p.ariaLabelClear,D=p.onSearch,E=p.onResults,F=void 0===E?function(){}:E,H=p.onSubmit,K=void 0===H?function(){}:H,L=p.onOpened,M=void 0===L?function(){}:L,Q=p.onReset,R=void 0===Q?function(){}:Q,U=p.onRender,W=void 0===U?function(){}:U,X=p.onClose,Y=void 0===X?function(){}:X,Z=p.noResults,_=void 0===Z?function(){}:Z,tt=p.onSelectedItem,et=void 0===tt?function(){}:tt;this.t=function(){var e,i,n,o,s;x.i(),e=x.o,i=x.s,n=x.u,o=x.l,s=x.h,t(i,{id:n,tabIndex:"0",role:"listbox"}),t(o,{addClass:s+"-results-wrapper"}),o.insertAdjacentElement("beforeend",i),e.parentNode.insertBefore(o,e.nextSibling),c(x.o,"input",x.v),x.m&&c(x.o,"click",x.v),x.p({element:x.o,results:x.s})},this.k=function(t,e){x.C&&("update"===t?x.o.setAttribute(x.j,e.value):"remove"===t?x.o.removeAttribute(x.j):x.o.value=x.o.getAttribute(x.j))},this.v=function(t){var e=t.target,i=t.type;if("true"!==x.o.getAttribute("aria-expanded")||"click"!==i){var n=e.value.replace(x.V,"\\$&");x.k("update",e);var o=x.m?0:x.g;clearTimeout(x.A),x.A=setTimeout((function(){x.O(n.trim())}),o)}},this.I=function(){var e;t(x.o,{"aria-owns":x.J+"-list","aria-expanded":"false","aria-autocomplete":"list","aria-activedescendant":"",role:"combobox",removeClass:"auto-expanded"}),n(x.l,"remove",x.N),(0==(null==(e=x.S)?void 0:e.length)&&!x.T||x.m)&&(x.s.textContent=""),x.$=x.q?0:-1,x.B()},this.O=function(t){x.G=t,x.P(!0),function(t,e){void 0===t&&(t=!1),t&&(n(t,"remove","hidden"),c(t,"click",e))}(x.D,x.destroy),0==t.length&&x.F&&n(x.D,"add","hidden"),x.H>t.length&&!x.m?x.P():x.K({currentValue:t,element:x.o}).then((function(e){var i=x.o.value.length,o=e.length;x.S=Array.isArray(e)?e:JSON.parse(JSON.stringify(e)),x.P(),x.L(),0==o&&0==i&&n(x.D,"add","hidden"),0==o&&i?(n(x.o,"remove","auto-expanded"),x.I(),x.M({element:x.o,currentValue:t,template:x.R}),x.U()):(o>0||function(t){return t&&"object"==typeof t&&t.constructor===Object}(e))&&(x.$=x.q?0:-1,x.R(),x.U())})).catch((function(){x.P(),x.I()}))},this.P=function(t){return x.o.parentNode.classList[t?"add":"remove"](x.W)},this.L=function(){return n(x.o,"remove",x.X)},this.U=function(){c(x.o,"keydown",x.Y),c(x.o,"click",x.Z),["mousemove","click"].map((function(t){c(x.s,t,x._)})),c(document,"click",x.tt)},this.R=function(e){t(x.o,{"aria-expanded":"true",addClass:x.h+"-expanded"}),x.s.textContent="";var o=0===x.S.length?x.et({currentValue:x.G,matches:0,template:e}):x.et({currentValue:x.G,matches:x.S,classGroup:x.it});x.s.insertAdjacentHTML("afterbegin",o),n(x.l,"add",x.N);var s=x.it?":not(."+x.it+")":"";x.nt=document.querySelectorAll("#"+x.u+" > li"+s),function(e){for(var i=0;i<e.length;i++)t(e[i],{role:"option",tabindex:"-1","aria-selected":"false","aria-setsize":e.length,"aria-posinset":i})}(x.nt),x.ot({type:"results",element:x.o,results:x.s}),x.st(),i(x.s,x.l)},this.tt=function(t){var e=t.target,i=null;(e.closest("ul")&&x.at||e.closest("."+x.rt))&&(i=!0),e.id===x.J||i||x.I()},this.st=function(){if(x.ct(r("."+x.ut)),x.q){var e=x.s.firstElementChild,i=x.it&&x.S.length>0&&x.q?e.nextElementSibling:e;x.dt({index:x.$,element:x.o,object:x.S[x.$]}),t(i,{id:x.lt+"-0",addClass:x.ut,"aria-selected":"true"}),o(x.o,x.lt+"-0")}},this.Z=function(){x.s.textContent.length>0&&!n(x.l,"contains",x.N)&&(t(x.o,{"aria-expanded":"true",addClass:x.h+"-expanded"}),n(x.l,"add",x.N),i(x.s,x.l),x.st(),x.ot({type:"showItems",element:x.o,results:x.s}))},this._=function(t){t.preventDefault();var e=t.target,i=t.type,o=e.closest("li"),s=null==o?void 0:o.hasAttribute("role"),a=x.ut,c=r("."+a);o&&s&&("click"===i&&x.ht(o),"mousemove"!==i||n(o,"contains",a)||(x.ct(c),x.ft(o),x.$=x.vt(o),x.dt({index:x.$,element:x.o,object:x.S[x.$]})))},this.ht=function(t){t&&0!==x.S.length?(x.F&&n(x.D,"remove","hidden"),x.o.value=e(t),x.pt({index:x.$,element:x.o,object:x.S[x.$],results:x.s}),x.at||(x.ct(t),x.I()),x.k("remove")):!x.at&&x.I()},this.vt=function(t){return Array.prototype.indexOf.call(x.nt,t)},this.Y=function(t){var i=t.keyCode,s=n(x.l,"contains",x.N),a=x.S.length+1;switch(x.bt=r("."+x.ut),i){case h:case f:if(t.preventDefault(),a<=1&&x.q||!s)return;i===h?(x.$<0&&(x.$=a-1),x.$-=1):(x.$+=1,x.$>=a&&(x.$=0)),x.ct(x.bt),x.$>=0&&x.$<a-1?(x.T&&s&&(x.o.value=e(x.nt[x.$])),x.dt({index:x.$,element:x.o,object:x.S[x.$]}),x.ft(x.nt[x.$])):(x.k(),o(x.o),x.dt({index:null,element:x.o,object:null}));break;case l:x.ht(x.bt);break;case v:case d:t.stopPropagation(),x.I()}},this.ft=function(e){var i=x.lt+"-"+x.vt(e);t(e,{id:i,"aria-selected":"true",addClass:x.ut}),o(x.o,i),s(e,x.u,x.it,x.s)},this.ct=function(e){e&&t(e,{id:"",removeClass:x.ut,"aria-selected":"false"})},this.i=function(){x.F&&(t(x.D,{class:x.h+"-clear hidden",type:"button",title:x.xt,"aria-label":x.xt}),x.o.insertAdjacentElement("afterend",x.D))},this.destroy=function(){x.F&&n(x.D,"add","hidden"),x.o.value="",x.o.focus(),x.s.textContent="",x.I(),x.L(),x.kt(x.o),u(x.o,"keydown",x.Y),u(x.o,"click",x.Z),u(document,"click",x.tt)},this.J=m,this.o=document.getElementById(m),this.K=(b=D,Boolean(b&&"function"==typeof b.then)?D:function(t){var e=t.currentValue,i=t.element;return Promise.resolve(D({currentValue:e,element:i}))}),this.et=F,this.p=W,this.pt=K,this.dt=et,this.ot=M,this.kt=R,this.M=_,this.B=Y,this.g=y,this.H=V,this.F=j,this.q=A,this.T=I,this.m=N,this.it=z,this.rt=B,this.xt=P||"clear the search query",this.h=G?G+"-auto":"auto",this.at=q,this.C=T,this.u=this.h+"-"+this.J+"-results",this.j="data-cache-auto-"+this.J,this.W=this.h+"-is-loading",this.N=this.h+"-is-active",this.ut=this.h+"-selected",this.lt=this.h+"-selected-option",this.X=this.h+"-error",this.V=/[|\\{}()[\]^$+*?.]/g,this.A=null,this.l=a("div"),this.s=a("ul"),this.D=a("button"),this.t()}}();
