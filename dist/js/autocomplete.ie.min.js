var Autocomplete=function(){"use strict";var t=function(t,e){for(var i in e)"addClass"===i?n(t,"add",e[i]):"removeClass"===i?n(t,"remove",e[i]):t.setAttribute(i,e[i])},e=function(t){return(t.firstElementChild||t).textContent.trim()},i=function(t,e){t.scrollTop=t.offsetTop-e.offsetHeight},n=function(t,e,i){return t.classList[e](i)},s=function(e,i){t(e,{"aria-activedescendant":i||""})},o=function(t,e,i,n){var s=n.previousSibling,o=s?s.offsetHeight:0;if("0"==t.getAttribute("aria-posinset")&&(n.scrollTop=t.offsetTop-function(t,e){var i=document.querySelectorAll("#"+t+" > li:not(."+e+")"),n=0;return[].slice.call(i).map((function(t){return n+=t.offsetHeight})),n}(e,i)),t.offsetTop-o<n.scrollTop)n.scrollTop=t.offsetTop-o;else{var a=t.offsetTop+t.offsetHeight-o;a>n.scrollTop+n.offsetHeight&&(n.scrollTop=a-n.offsetHeight)}},a=function(t){return document.createElement(t)},r=function(t){return document.querySelector(t)},c=function(t,e,i){t.addEventListener(e,i)},u=function(t,e,i){t.removeEventListener(e,i)},d=27,l=13,h=38,f=40,v=9;return function(m,p){var b,x=this,k=p.delay,y=void 0===k?500:k,C=p.clearButton,j=void 0===C||C,w=p.howManyCharacters,V=void 0===w?1:w,g=p.selectFirst,A=void 0!==g&&g,O=p.insertToInput,I=void 0!==O&&O,J=p.showAllValues,N=void 0!==J&&J,S=p.cache,T=void 0!==S&&S,$=p.disableCloseOnSelect,q=void 0!==$&&$,z=p.classGroup,B=p.classPreventClosing,G=p.classPrefix,P=p.ariaLabelClear,D=p.onSearch,E=p.onResults,F=void 0===E?function(){}:E,H=p.onSubmit,K=void 0===H?function(){}:H,L=p.onOpened,M=void 0===L?function(){}:L,Q=p.onReset,R=void 0===Q?function(){}:Q,U=p.onRender,W=void 0===U?function(){}:U,X=p.onClose,Y=void 0===X?function(){}:X,Z=p.noResults,_=void 0===Z?function(){}:Z,tt=p.onSelectedItem,et=void 0===tt?function(){}:tt;this.t=function(){var e,i,n,s,o;x.i(),e=x.s,i=x.o,n=x.u,s=x.l,o=x.h,t(i,{id:n,tabIndex:"0",role:"listbox"}),t(s,{addClass:o+"-results-wrapper"}),s.insertAdjacentElement("beforeend",i),e.parentNode.insertBefore(s,e.nextSibling),c(x.s,"input",x.v),x.m&&c(x.s,"click",x.v),x.p({element:x.s,results:x.o})},this.k=function(t,e){x.C&&("update"===t?x.s.setAttribute(x.j,e.value):"remove"===t?x.s.removeAttribute(x.j):x.s.value=x.s.getAttribute(x.j))},this.v=function(t){var e=t.target,i=t.type;if("true"!==x.s.getAttribute("aria-expanded")||"click"!==i){var n=e.value.replace(x.V,"\\$&");x.k("update",e);var s=x.m?0:x.g;clearTimeout(x.A),x.A=setTimeout((function(){x.O(n.trim())}),s)}},this.I=function(){t(x.s,{"aria-owns":x.J+"-list","aria-expanded":"false","aria-autocomplete":"list","aria-activedescendant":"",role:"combobox",removeClass:"auto-expanded"}),n(x.l,"remove",x.N),x.S=x.T?0:-1,x.$()},this.O=function(t){x.q=t,x.B(!0),function(t,e){void 0===t&&(t=!1),t&&(n(t,"remove","hidden"),c(t,"click",e))}(x.G,x.destroy),0==t.length&&x.P&&n(x.G,"add","hidden"),x.D>t.length&&!x.m?x.B():x.F({currentValue:t,element:x.s}).then((function(e){var i=x.s.value.length,s=e.length;x.H=Array.isArray(e)?e:JSON.parse(JSON.stringify(e)),x.B(),x.K(),0==s&&0==i&&n(x.G,"add","hidden"),0==s&&i?(n(x.s,"remove","auto-expanded"),x.I(),x.L({element:x.s,currentValue:t,template:x.M}),x.R()):(s>0||function(t){return t&&"object"==typeof t&&t.constructor===Object}(e))&&(x.S=x.T?0:-1,x.M(),x.R())})).catch((function(){x.B(),x.I()}))},this.B=function(t){return x.s.parentNode.classList[t?"add":"remove"](x.U)},this.K=function(){return n(x.s,"remove",x.W)},this.R=function(){c(x.s,"keydown",x.X),c(x.s,"click",x.Y),["mousemove","click"].map((function(t){c(x.o,t,x.Z)})),c(document,"click",x._)},this.M=function(e){t(x.s,{"aria-expanded":"true",addClass:x.h+"-expanded"}),x.o.textContent="";var s=0===x.H.length?x.tt({currentValue:x.q,matches:0,template:e}):x.tt({currentValue:x.q,matches:x.H,classGroup:x.et});x.o.insertAdjacentHTML("afterbegin",s),n(x.l,"add",x.N);var o=x.et?":not(."+x.et+")":"";x.it=document.querySelectorAll("#"+x.u+" > li"+o),function(e){for(var i=0;i<e.length;i++)t(e[i],{role:"option",tabindex:"-1","aria-selected":"false","aria-setsize":e.length,"aria-posinset":i})}(x.it),x.nt({type:"results",element:x.s,results:x.o}),x.st(),i(x.o,x.l)},this._=function(t){var e=t.target,i=null;(e.closest("ul")&&x.ot||e.closest("."+x.at))&&(i=!0),e.id===x.J||i||x.I()},this.st=function(){if(x.rt(r("."+x.ct)),x.T){var e=x.o.firstElementChild,i=x.et&&x.H.length>0&&x.T?e.nextElementSibling:e;x.ut({index:x.S,element:x.s,object:x.H[x.S]}),t(i,{id:x.dt+"-0",addClass:x.ct,"aria-selected":"true"}),s(x.s,x.dt+"-0")}},this.Y=function(){x.o.textContent.length>0&&!n(x.l,"contains",x.N)&&(t(x.s,{"aria-expanded":"true",addClass:x.h+"-expanded"}),n(x.l,"add",x.N),i(x.o,x.l),x.st(),x.nt({type:"showItems",element:x.s,results:x.o}))},this.Z=function(t){t.preventDefault();var e=t.target,i=t.type,s=e.closest("li"),o=null==s?void 0:s.hasAttribute("role"),a=x.ct,c=r("."+a);s&&o&&("click"===i&&x.lt(s),"mousemove"!==i||n(s,"contains",a)||(x.rt(c),x.ht(s),x.S=x.ft(s),x.ut({index:x.S,element:x.s,object:x.H[x.S]})))},this.lt=function(t){t&&0!==x.H.length?(x.s.value=e(t),x.vt({index:x.S,element:x.s,object:x.H[x.S],results:x.o}),x.ot||(x.rt(t),x.I()),x.P&&n(x.G,"remove","hidden"),x.k("remove")):!x.ot&&x.I()},this.ft=function(t){return Array.prototype.indexOf.call(x.it,t)},this.X=function(t){var i=t.keyCode,o=n(x.l,"contains",x.N),a=x.H.length+1;switch(x.pt=r("."+x.ct),i){case h:case f:if(t.preventDefault(),a<=1&&x.T||!o)return;i===h?(x.S<0&&(x.S=a-1),x.S-=1):(x.S+=1,x.S>=a&&(x.S=0)),x.rt(x.pt),x.S>=0&&x.S<a-1?(x.bt&&o&&(x.s.value=e(x.it[x.S])),x.ut({index:x.S,element:x.s,object:x.H[x.S]}),x.ht(x.it[x.S])):(x.k(),s(x.s),x.ut({index:null,element:x.s,object:null}));break;case l:x.lt(x.pt);break;case v:case d:t.stopPropagation(),x.I()}},this.ht=function(e){var i=x.dt+"-"+x.ft(e);t(e,{id:i,"aria-selected":"true",addClass:x.ct}),s(x.s,i),o(e,x.u,x.et,x.o)},this.rt=function(e){e&&t(e,{id:"",removeClass:x.ct,"aria-selected":"false"})},this.i=function(){x.P&&(t(x.G,{class:x.h+"-clear hidden",type:"button",title:x.xt,"aria-label":x.xt}),x.s.insertAdjacentElement("afterend",x.G))},this.destroy=function(){x.P&&n(x.G,"add","hidden"),x.s.value="",x.s.focus(),x.o.textContent="",x.I(),x.K(),x.kt(x.s),u(x.s,"keydown",x.X),u(x.s,"click",x.Y),u(document,"click",x._)},this.J=m,this.s=document.getElementById(m),this.F=(b=D,Boolean(b&&"function"==typeof b.then)?D:function(t){var e=t.currentValue,i=t.element;return Promise.resolve(D({currentValue:e,element:i}))}),this.tt=F,this.p=W,this.vt=K,this.ut=et,this.nt=M,this.kt=R,this.L=_,this.$=Y,this.g=y,this.D=V,this.P=j,this.T=A,this.bt=I,this.m=N,this.et=z,this.at=B,this.xt=P||"clear the search query",this.h=G?G+"-auto":"auto",this.ot=q,this.C=T,this.u=this.h+"-"+this.J+"-results",this.j="data-cache-auto-"+this.J,this.U=this.h+"-is-loading",this.N=this.h+"-is-active",this.ct=this.h+"-selected",this.dt=this.h+"-selected-option",this.W=this.h+"-error",this.V=/[|\\{}()[\]^$+*?.]/g,this.A=null,this.l=a("div"),this.o=a("ul"),this.G=a("button"),this.t()}}();
